!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){const n=r(4),s=r(3);r(1);var o={type:Phaser.AUTO,width:800,height:600,physics:{default:"matter",matter:{gravity:{y:1},debug:!1}},scene:{preload:async function(){a.preload(this.load),this.load.image("crate","assets/crates/crate_01.png"),await i.preload(this.load),this.load.json("shapes","assets/truck/truck.json")},create:async function(){var e=this.cache.json.get("shapes");f=Phaser.Physics.Matter.Matter.Body,Vector=Phaser.Physics.Matter.Matter.Vector,Common=Phaser.Physics.Matter.Matter.Common,Vertices=Phaser.Physics.Matter.Matter.Vertices,Bounds=Phaser.Physics.Matter.Matter.Bounds,PhysicsEditorParser=Phaser.Physics.Matter.PhysicsEditorParser,s(PhysicsEditorParser),await i.create(this,e),this.objs=[];let t=a.create(this.matter,e,200,200);this.objs.push(t.chassis),this.objs.push(t.backWheel),this.objs.push(t.frontWheel),this.objs.push(this.matter.add.image(100,0,"crate",null,{shape:e.crate})),this.cameras.main.startFollow(t.chassis,!0,1,1,0,20),t.chassis,l=t.backWheel,h=t.frontWheel;this.objs[3];for(var r of this.objs)r.setScale(.3,.3);c=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A),u=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D)},update:async function(){u.isDown&&(f.setAngularVelocity(l.body,Math.PI/6),f.setAngularVelocity(h.body,Math.PI/6));c.isDown&&(f.setAngularVelocity(l.body,-Math.PI/6),f.setAngularVelocity(h.body,-Math.PI/6));await i.update(this.cameras.main)}}};new Phaser.Game(o);let i=new(r(5))("assets/world/maps/map_01/map_01.json"),a=new n;var c,u,l,h,f},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var s=e[n];"."===s?e.splice(n,1):".."===s?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",s=!1,o=arguments.length-1;o>=-1&&!s;o--){var i=o>=0?arguments[o]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,s="/"===i.charAt(0))}return(s?"/":"")+(t=r(n(t.split("/"),(function(e){return!!e})),!s).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),i="/"===s(e,-1);return(e=r(n(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var s=n(e.split("/")),o=n(r.split("/")),i=Math.min(s.length,o.length),a=i,c=0;c<i;c++)if(s[c]!==o[c]){a=c;break}var u=[];for(c=a;c<s.length;c++)u.push("..");return(u=u.concat(o.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,s=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!s){n=o;break}}else s=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,s=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!s){r=t+1;break}}else-1===n&&(s=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,s=!0,o=0,i=e.length-1;i>=0;--i){var a=e.charCodeAt(i);if(47!==a)-1===n&&(s=!1,n=i+1),46===a?-1===t?t=i:1!==o&&(o=1):-1!==t&&(o=-1);else if(!s){r=i+1;break}}return-1===t||-1===n||0===o||1===o&&t===n-1&&t===r+1?"":e.slice(t,n)};var s="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(2))},function(e,t){var r,n,s=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c,u=[],l=!1,h=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&d())}function d(){if(!l){var e=a(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function y(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1!==u.length||l||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=y,s.addListener=y,s.once=y,s.off=y,s.removeListener=y,s.removeAllListeners=y,s.emit=y,s.prependListener=y,s.prependOnceListener=y,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t){Phaser.Physics.Matter.Matter.Body;const r=Phaser.Physics.Matter.Matter.Vector,n=(Phaser.Physics.Matter.Matter.Common,Phaser.Physics.Matter.Matter.Vertices),s=Phaser.Physics.Matter.Matter.Bounds,o=Phaser.Physics.Matter.Matter.Bodies;e.exports=function(e){e.parseVertices=function(e,t){var i,a,c,u,l;console.log(r);var h=[];for(t=t||{},u=0;u<e.length;u+=1){let r=n.centre(e[u]),s=e[u];h.push(o.fromVertices(r.x,r.y,s,t))}for(i=0;i<h.length;i++){var f=h[i];for(a=i+1;a<h.length;a++){var d=h[a];if(s.overlaps(f.bounds,d.bounds)){var p=f.vertices,y=d.vertices;for(c=0;c<f.vertices.length;c++)for(l=0;l<d.vertices.length;l++){var g=r.magnitudeSquared(r.sub(p[(c+1)%p.length],y[l])),m=r.magnitudeSquared(r.sub(p[c],y[(l+1)%y.length]));g<5&&m<5&&(p[c].isInternal=!0,y[l].isInternal=!0)}}}}return h}}},function(e,t){e.exports=class{constructor(){}preload(e){e.image("chassis","assets/truck/truck_1/truck_1_body_lights_on_yellow.png"),e.image("wheel","assets/truck/truck_1/truck_1_wheel.png")}create(e,t,r,n){let s=e.add.image(r,n,"chassis",null,{shape:t.truck}),o=e.add.image(r+150,95,"wheel",null,{shape:t.wheel,...t.wheel}),i=e.add.image(r-155,95,"wheel",null,{shape:t.wheel,...t.wheel});return e.add.constraint(s.body,o.body,5,.5,{pointA:{x:120,y:85}}),e.add.constraint(s.body,i.body,5,.5,{pointA:{x:-150,y:85}}),{chassis:s,frontWheel:o,backWheel:i}}}},function(e,t,r){const n=r(1);e.exports=class{constructor(e){this.jsonFile=e,this.json=fetch(e).then(e=>e.json()),this.sprites=[]}async preload(e){let t=await this.json,r=n.dirname(this.jsonFile);for(var s of t.background)e.image(s.key,r+"/"+s.path);for(var s of t.foreground)e.image(s.key,r+"/"+s.path)}async create(e,t){let r=await this.json;for(var n of r.background){let t=e.add.tileSprite(0,0,e.game.config.width,e.game.config.height,n.key);t.setOrigin(0,0),t.setScrollFactor(0,0),this.sprites.push({sprite:t,config:n})}for(var n of r.foreground)e.matter.add.image(n.offsetX,e.game.config.height+n.offsetY,n.key,null,{shape:t[n.key]})}async update(e){for(var t of this.sprites){const{config:r,sprite:n}=t;r.speedX&&(n.tilePositionX+=r.speedX),r.speedY&&(n.tilePositionY+=r.speedY),r.parallaxSpeedX&&(n.tilePositionX=e.scrollX*r.parallaxSpeedX),r.parallaxSpeedY&&(n.tilePositionY=e.scrollY*r.parallaxSpeedY)}}}}]);